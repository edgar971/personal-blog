{"data":{"site":{"siteMetadata":{"title":"Edgar Pino's Blog","author":"Edgar Pino"}},"markdownRemark":{"id":"0caa960e-24fb-5595-aa8e-fa8548dff32f","excerpt":"Problem When moving my blog from Ghost to Gatsby I ran into an issue. I wanted to have custom links instead of the default directory name…","html":"<h2>Problem</h2>\n<p>When moving my blog from Ghost to Gatsby I ran into an issue. I wanted to have custom links instead of the default directory name inside of pages. Something like <code class=\"language-text\">/2018-01-12/path-to-a-page</code> instead of <code class=\"language-text\">/path-to-a-page</code>. I did search but I didn’t find a solution that would support both type of links.</p>\n<h2>Solution</h2>\n<p>My solution was simple and not hard to implement. We are going to support adding <code class=\"language-text\">path</code> option to the frontmatter, that is the content between the three hyphens.</p>\n<p>Something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">---\ntitle: &#39;Custom URLs in Gatsby Blog Posts&#39;\ndate: &#39;2018-09-21&#39;\npath: &#39;/custom/path/to/blog-post&#39;\n---</code></pre></div>\n<p>We also want to support the default way of generating paths which is directory based.</p>\n<p>The first thing we are going to do is update our <code class=\"language-text\">onCreateNode</code> in the <code class=\"language-text\">gatsby-node.js</code> to support the <code class=\"language-text\">path</code> field in our frontmatter.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> path\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  path <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>path\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  path <span class=\"token operator\">=</span> <span class=\"token function\">createFilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We first check if the node has the <code class=\"language-text\">path</code> field and set the path if it is.\nWe use the default way of creating the path via the <code class=\"language-text\">createFilePath</code> function as fallback.</p>\n<p>Here’s the full <code class=\"language-text\">onCreateNode</code> function in <code class=\"language-text\">gatsby-node.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateNode</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNodeField <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token string\">`MarkdownRemark`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> path\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      path <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>path\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      path <span class=\"token operator\">=</span> <span class=\"token function\">createFilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`slug`</span></span><span class=\"token punctuation\">,</span>\n      node<span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> path<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>That</p>","frontmatter":{"title":"Custom URLs in Gatsby Blog Posts","date":"September 21, 2018"}}},"pageContext":{"slug":"/custom-urls-in-gatsby-blog-posts/","previous":{"fields":{"slug":"moving-my-blog-to-gatsby-js"},"frontmatter":{"title":"Moving my blog to Gatsby.js"}},"next":null}}